@(state: String)(implicit request: RequestHeader)
@import helper.CSRF

@main("ProjektMemory Web – TUI") {
  <h1>ProjektMemory – Web-TUI</h1>

  <pre id="log">@state</pre>

  <h2>Eingabe</h2>
  <form action='@routes.GameController.cmd' method='post'>
    @CSRF.formField
    <label for="cmd">Befehl:</label>
    <input id="cmd" name="cmd" type="text" autofocus>
    <button type="submit">Senden</button>
  </form>

  <h2>Aktionen</h2>
  <form action='@routes.GameController.newGame' method='post'>
    @CSRF.formField
    <button type="submit">Neues Spiel</button>
  </form>

  <form action='@routes.GameController.quit' method='post'>
    @CSRF.formField
    <button type="submit">Beenden</button>
  </form>

  <p>
    <a href='@routes.GameController.index'>Aktualisieren</a>
  </p>

  <!-- Neuer Button: GUI starten im Hintergrund -->
  <button id="startGuiBtn" type="button">GUI starten</button>

  <script type="text/javascript">
    async function refreshLog() {
      try {
        const resp = await fetch('@routes.GameController.state', { headers: { 'Accept': 'text/plain' }});
        if (resp.ok) {
          const txt = await resp.text();
          document.getElementById('log').textContent = txt;
        }
      } catch (e) {}
    }
    window.addEventListener('load', refreshLog);
    setInterval(refreshLog, 1000);
  </script>
}




